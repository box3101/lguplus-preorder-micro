---
import MainVisual from '../../components/MainVisual.astro';
import Notice from '../../components/Notice.astro';
import ModelSelect from '../../components/ModelSelect.astro';
import PriceComparison from '../../components/PriceComparison.astro';
import LuckyDraw from '../../components/LuckyDraw.astro';
import TodayTomorrowTab from '../../components/TodayTomorrowTab.astro';
import BenefitSummary from '../../components/BenefitSummary.astro';
---

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì‚¬ì „ì˜ˆì•½</title>
    <link rel="stylesheet" href={`../assets/css/common.css?v=${Date.now()}`} />
    <link rel="stylesheet" href="../assets/css/ui.css" />
    <link rel="stylesheet" href="/src/css/ui.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"
    />
  </head>
  <body>
    <div id="content" class="content-wrapper preorder-section">
      <main class="container main-container">
        <!-- ì‚¬ì „ì˜ˆì•½ ê¸°ê°„ -->
        <section class="preorder-content">
          <!-- ë©”ì¸ ë¹„ì¥¬ì–¼ -->
          <MainVisual />
          <!-- ë©”ì¸ ë¹„ì¥¬ì–¼ EEE -->

          <!-- ëª¨ë¸ ì„ íƒ -->
          <ModelSelect />
          <!-- ëª¨ë¸ ì„ íƒ EEE -->

          <!-- ì˜¤ëŠ˜ ë‚´ì¼ ì¿ í° -->
          <TodayTomorrowTab />
          <!-- ì˜¤ëŠ˜ ë‚´ì¼ ì¿ í° EEE -->

          <!-- ê²½í’ˆ/ìƒí’ˆ ì¶”ì²¨ ì´ë²¤íŠ¸ -->
          <LuckyDraw />
          <!-- ê²½í’ˆ/ìƒí’ˆ ì¶”ì²¨ ì´ë²¤íŠ¸ EEE -->

          <!-- ê°€ê²©/í• ì¸ ë¹„êµ ì„¹ì…˜ -->
          <PriceComparison />
          <!-- ê·¸ê³³ë³´ë‹¤ê°€ê²©/í• ì¸ ë¹„êµ ì„¹ì…˜ EEE -->

          <article class="s25_counter common-inner">
            <div
              class="tit_cnt3_inner"
              data-aos="fade-up"
              data-aos-duration="1000"
              data-aos-delay="100"
              data-aos-once="true"
            >
              <img
                style="width: 246px!important;"
                src="../assets/img/counter-title.png"
                alt="ì¶œì‹œì¼ ì „ì— ë¨¼ì € ë°›ì•„ë³´ì„¸ìš”"
              />
            </div>
            <div class="realtime_counter-wrp">
              <div
                class="realtime_counter"
                data-aos="flip-left"
                data-aos-duration="800"
                data-aos-delay="400"
                data-aos-once="true"
              >
                <p class="counter-title">ë¯¸ë¦¬ë“œë¦¼ ì‹ ì²­ì ìˆ˜</p>
                <div class="reqPReCnt-wrp">
                  <span id="reqPReCnt" class="counter" data-start="" data-end=""
                    >2,025</span
                  ><em>ëª…</em>
                </div>
                <div class="counter-img">
                  <img
                    style="width: 165px!important;"
                    src="../assets/img/counter-img.png"
                    alt=""
                  />
                </div>
              </div>
              <div
                class="alarm"
                data-aos="fade-up"
                data-aos-duration="800"
                data-aos-delay="1200"
                data-aos-once="true"
              >
                â€» ì‹¤ì‹œê°„ ì‹ ì²­ ìˆ˜ëŠ” 10ë¶„ë§ˆë‹¤ ì—…ë°ì´íŠ¸ ë©ë‹ˆë‹¤
              </div>
            </div>
            <ul
              class="info-txt"
              data-aos="fade-up"
              data-aos-duration="800"
              data-aos-delay="1600"
              data-aos-once="true"
            >
              <li>
                ë°©ë²• : <em>1/23(í™”)</em>ê¹Œì§€
                <em class="under">ê°€ì… ì‹ ì²­</em>
              </li>
              <li>
                ëŒ€ìƒ : U<sup>+</sup> ì´ìš©ì <span class="ft_12"
                  >(1ë…„ ì´ìƒ + ì—°ì²´ ì—†ìŒ)</span
                >
              </li>
            </ul>

            <div
              class="common-btn-wrp mt-55"
              data-aos="fade-up"
              data-aos-duration="800"
              data-aos-delay="600"
            >
              <div class="toast dongdong-effect">
                <img src="../assets/img/coupon-toast2.png" />
              </div>
              <button
                class="common-btn"
                data-gtm-event-category="í´ë¦­"
                data-gtm-event-action="ì‚¬ì „ì•ŒëŒ ì½˜í…ì¸  ì˜ì—­ - ë²„íŠ¼ í´ë¦­"
                data-gtm-click-location="ì‚¬ì „ì•ŒëŒ ì½˜í…ì¸  ì˜ì—­"
                data-gtm-event-name="button_click"
                data-gtm-event-label="ì»¨í…ì¸  : ì•ŒëŒì‹ ì²­_01-ë‹¨ê³„ì§„ì…_ë‚´ ë‹¹ì²¨ê¸ˆ í™•ì¸í•˜ê¸°"
                data-gtm-click-text="ì•ŒëŒì‹ ì²­_01-ë‹¨ê³„ì§„ì…_ë‚´ ë‹¹ì²¨ê¸ˆ í™•ì¸í•˜ê¸°"
                onclick="ALARM.oepnEvtPag();"
                type="button"
              >
                ì¶œì‹œ ì „ ë¯¸ë¦¬ ë°›ê¸°
                <i class="arrow-right animate"></i>
              </button>
            </div>
          </article>

          <!-- í˜œíƒ ìš”ì•½ ì„¹ì…˜ -->
          <BenefitSummary />
          <!-- í˜œíƒ ìš”ì•½ ì„¹ì…˜ EEE -->

          <!-- ìˆì¸ ì˜ìƒ ì„¹ì…˜ -->
          <article class="shorts-section common-inner">
            <div class="shorts-title">
              <img src="../assets/img/shorts-title.png" alt="ìˆì¸ ì˜ìƒ">
            </div>
            <div class="shorts-content">
              <div class="shorts-video-wrap" onclick="COMMON.openBottomSheet('shorts-video')">
                <img src="../assets/img/shorts-thumbnail.png" alt="ìˆì¸ ì˜ìƒ ì¸ë„¤ì¼" />
              </div>
            </div>
          </article>
          <!-- ìˆì¸ ì˜ìƒ ì„¹ì…˜ EEE -->
        </section>

        <!-- ì•µì½œìš”ì²­ -->
        <article class="announce-request common-inner">
          <div class="announce-request-inner">
            <img src="../assets/img/announce-request-title.png" alt="ì•µì½œìš”ì²­">
          </div>
          <div class="announce-request-content">
            <div class="announce-request-card">
              <div class="announce-request-text">
                <h2>ì•µì½œìš”ì²­</h2>
                <p>ì•µì½œìš”ì²­ ì¹´ë“œ ì˜ì—­</p>
              </div>
              <div class="announce-request-img">
                <img src="../assets/img/announce-request1.png" alt="ê°¤ëŸ­ì‹œ ì›Œì¹˜ 7" />
              </div>
            </div>
            <div class="announce-request-card">
              <div class="announce-request-text">
                <h2>ì•µì½œìš”ì²­</h2>
                <p>ì•µì½œìš”ì²­ ì¹´ë“œ ì˜ì—­</p>
              </div>
              <div class="announce-request-img">
                <img src="../assets/img/announce-request2.png" alt="ê°¤ëŸ­ì‹œ ì›Œì¹˜ 7" />
              </div>
            </div>
            <div class="announce-request-card">
              <div class="announce-request-text">
                <h2>ì•µì½œìš”ì²­</h2>
                <p>ì•µì½œìš”ì²­ ì¹´ë“œ ì˜ì—­</p>
              </div>
              <div class="announce-request-img">
                <img src="../assets/img/announce-request3.png" alt="ê°¤ëŸ­ì‹œ ì›Œì¹˜ 7" />
              </div>
            </div>
          </div>
        </article>
        <!-- ì•µì½œìš”ì²­ EEE -->

      <!-- ì±„íŒ… ì„¹ì…˜ -->
      <article class="chat-section common-inner">
        <div class="chat-content">
          <div class="chat-message customer" data-aos="fade-right" data-aos-duration="1000">
            <div class="message-bubble">
              ì €ì–´... ì‚¬ì „ì˜ˆì•½ì„ ì²˜ìŒ í•´ë³´ëŠ”ë°ìš”ğŸ˜…
            </div>
          </div>

          <div class="chat-message uplus" data-aos="fade-left" data-aos-duration="1000">
            <div class="message-bubble">
              ì˜ˆì•½ë§Œ í•˜ê³  ê°œí†µì€ ì²œì²œíˆ í•´ë„ ë˜ë‚˜ìš”?
            </div>
          </div>

          <div class="chat-message customer" data-aos="fade-right" data-aos-duration="1000">
            <div class="message-bubble">
              ì•„, ì˜ˆì•½í˜„ê¸ˆ ë°”ë¡œ ê³„ì•½í•˜ëŠ” ê±´ ì˜ì•˜ì–´ìš” ğŸ˜…
            </div>
          </div>

          <div class="chat-message uplus" data-aos="fade-left" data-aos-duration="1000">
            <div class="message-bubble">
              ê³ ë¯¼ë˜ì‹œëŠ” ë§ˆìŒ ì €í¬ë„ ê³µê°í•˜ê³  ìˆì–´ìš”. ì¡°íŠ¹íˆ ë¹„êµí•´ë³´ê³  ê³ ê°ë‹˜ê»˜ ê°€ì¥ ì¢‹ì€ ê²°ì •ì„ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤ ğŸ˜Š
            </div>
          </div>
        </div>
      </article>
      <!-- ì±„íŒ… ì„¹ì…˜ EEE -->

      </main>
    </div>

    <script
      is:inline
      src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"
    ></script>
    <script is:inline src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script
      is:inline
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script is:inline>
      window.addEventListener('load', function () {
        if (typeof AOS !== 'undefined') {
          AOS.init({
            easing: 'ease-out-cubic',
            once: true,
          });
        }

        /* [S] ìŠ¤í¬ë¡¤ ëª¨ë‹ˆí„° */
        const $counters = $('.counter');
        // ë…¸ì¶œ ë¹„ìœ¨(%)ê³¼ ì• ë‹ˆë©”ì´ì…˜ ì†ë„(ms)ì„ ì„¤ì •
        const exposurePercentage = 100; // ìŠ¤í¬ë¡¤ì‹œ $counters ì»¨í…ì¸ ê°€ í™”ë©´ì— 100% ë…¸ì¶œë˜ë©´ ìˆ«ìê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤.
        const duration = 5000;
        const addCommas = true; // ìˆ«ìì— ì‰¼í‘œ

        // ìˆ«ìë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  ì• ë‹ˆë©”ì´ì…˜í•˜ëŠ” í•¨ìˆ˜ ì •ì˜
        function updateCounter($el, start, end) {
          let startTime;
          function animateCounter(timestamp) {
            if (!startTime) startTime = timestamp;
            const progress = (timestamp - startTime) / duration;
            const current = Math.round(start + progress * (end - start));
            const formattedNumber = addCommas
              ? current.toLocaleString()
              : current;
            $el.text(formattedNumber);

            if (progress < 1) {
              requestAnimationFrame(animateCounter);
            } else {
              $el.text(addCommas ? end.toLocaleString() : end);
            }
          }
          requestAnimationFrame(animateCounter);
        }

        // ìœˆë„ìš°ì˜ ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.
        $(window)
          .on('scroll', function () {
            // ê° "counter" ìš”ì†Œì— ëŒ€í•´ ë°˜ë³µí•©ë‹ˆë‹¤.
            $counters.each(function () {
              const $el = $(this);
              // ìš”ì†Œê°€ ì•„ì§ ìŠ¤í¬ë¡¤ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì²˜ë¦¬í•©ë‹ˆë‹¤.
              if (!$el.data('scrolled')) {
                // ìš”ì†Œì˜ ìœ„ì¹˜ ì •ë³´
                const rect = $el[0].getBoundingClientRect();
                const winHeight = window.innerHeight;
                const contentHeight = rect.bottom - rect.top;

                // ìš”ì†Œê°€ í™”ë©´ì— íŠ¹ì • ë¹„ìœ¨ë§Œí¼ ë…¸ì¶œë  ë•Œ ì²˜ë¦¬
                if (
                  rect.top <=
                    winHeight - (contentHeight * exposurePercentage) / 100 &&
                  rect.bottom >= (contentHeight * exposurePercentage) / 100
                ) {
                  const start = parseInt($el.data('start'));
                  const end = parseInt($el.data('end'));
                  //updateCounter($el, start, end);
                  updateCounter($counters, 0, 100);
                  $el.data('scrolled', true);
                }
              }
            });
          })
          .scroll();

        /* [e] ìŠ¤í¬ë¡¤ ëª¨ë‹ˆí„° */
      });
    </script>
    <script type="module" src="../assets/js/main/main.js"></script>
  </body>
</html>
